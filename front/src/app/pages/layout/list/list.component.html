<form
  nz-form
  nzLayout="inline"
  [formGroup]="searchForm"
  (ngSubmit)="getMovieList()"
>
  <div nz-row>
    <div
      nz-col
      nzSpan="8"
      *ngFor="let field of searchField"
      style="margin-top: 20px"
    >
      <nz-form-item>
        <nz-form-label>{{ field.label }}</nz-form-label>
        <nz-form-control [nzErrorTip]="'Please input ' + field.label!">
          <nz-select
            *ngIf="field.value == 'type'"
            [ngModel]="field.value"
            [nzPlaceHolder]="field.label"
            [formControlName]="field.value"
          >
            <nz-option
              *ngFor="let item of typeOption"
              [nzValue]="item.value"
              [nzLabel]="item.label"
            ></nz-option>
          </nz-select>
          <input
            *ngIf="field.value != 'type'"
            nz-input
            [formControlName]="field.value"
            [placeholder]="field.label"
          />
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col nzSpan="8" style="margin-top: 20px">
      <button nz-button nzType="primary">Submit</button>
      <button
        nz-button
        nzType="default"
        (click)="isVisible = true"
        style="margin-left: 15px"
      >
        <i nz-icon nzType="plus" nzTheme="outline"></i>Add Movie
      </button>
    </div>
  </div>
</form>

<div style="padding: 5px 10%">
  <nz-spin [nzSpinning]="loading" style="margin: 20px auto">
    <nz-list nzItemLayout="vertical">
      <nz-list-item *ngFor="let item of movieList">
        <nz-list-item-meta>
          <nz-list-item-meta-title>
            <a
              href="{{ item.href }}"
              style="
                color: #373737;
                font-weight: bolder;
                font-size: 18px;
                margin-right: 15px;
                text-decoration: underline;
              "
              >{{ item.Name }}</a
            >
            <!-- <span
              *ngIf="item['Discounted Price'] !== 'Free'"
              style="text-decoration: line-through; margin-right: 10px"
              >{{ item["Original Price"] }}</span
            >
            <span style="color: orangered; font-size: 18px">{{
              item["Discounted Price"]
            }}</span> -->
            <span>{{ item.Developer }}</span>
          </nz-list-item-meta-title>
          <nz-list-item-meta-description>
            {{ item["Release Date"] }} &nbsp;
            <span style="color: #333">By</span> &nbsp; {{ item["Distributer"] }}
          </nz-list-item-meta-description>
        </nz-list-item-meta>
        {{ item["Summary"] }}
        <ul nz-list-item-actions>
          <nz-list-item-action>
            <span nz-icon nzType="comment" style="margin-right: 8px"></span>
            {{ item["# of Critic Reviews"] }}
          </nz-list-item-action>
          <nz-list-item-action>
            <span nz-icon nzType="smile" style="margin-right: 8px"></span>
            ðŸ™‚{{ item["Critic Positive"] }}
          </nz-list-item-action>
          <nz-list-item-action>
            <span nz-icon nzType="meh" style="margin-right: 8px"></span>
            ðŸ«¥{{ item["Critic Negative"] }}
          </nz-list-item-action>
        </ul>
        <nz-list-item-extra>
          <img
            width="180"
            alt="logo"
            src="../../../../assets/images/game.png"
          />
        </nz-list-item-extra>
      </nz-list-item>
    </nz-list>
  </nz-spin>
  <nz-pagination
    [nzPageIndex]="page"
    [nzTotal]="total"
    nzShowSizeChanger
    [nzPageSize]="size"
    (nzPageIndexChange)="pageChange($event)"
    (nzPageSizeChange)="pageSizeChange($event)"
    style="text-align: right"
  ></nz-pagination>
</div>

<nz-modal
  [(nzVisible)]="isVisible"
  nzTitle="Add Movie"
  nzOkText="Ok"
  nzCancelText="Cancel"
  (nzOnOk)="submitForm()"
  (nzOnCancel)="isVisible = false"
>
  <ng-container *nzModalContent>
    <form nz-form [formGroup]="addForm">
      <div nz-row [nzGutter]="24">
        <div nz-col [nzSpan]="24" *ngFor="let field of addField">
          <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="name"
              >{{ field.label }}
            </nz-form-label>
            <nz-form-control
              [nzSm]="14"
              [nzXs]="24"
              [nzErrorTip]="'Please input ' + field.label!"
            >
              <input
                nz-input
                [formControlName]="field.value"
                id="name"
                [placeholder]="field.label"
              />
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
    </form>
  </ng-container>
</nz-modal>
