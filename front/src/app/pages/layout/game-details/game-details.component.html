<button
  nz-button
  nzType="default"
  nzSize="small"
  style="float: left"
  routerLink="/layout/list"
>
  < Back
</button>
<h1 class="song-title">- {{ gameInfo.Title }} -</h1>
<div class="song-info">
  <img
    style="width: 200px; height: 200px"
    src="https://img2.baidu.com/it/u=2253673318,3372600971&fm=253&fmt=auto&app=138&f=JPEG?w=528&h=500"
  />
  <div class="song-info-basic">
    <div class="title">
      {{ gameInfo.Title
      }}<span
        nz-icon
        nzType="heart"
        nzTheme="outline"
        (click)="onCollect()"
        style="color: red; margin-left: 20px; cursor: pointer"
      ></span>
      <span style="float: right">
        <span
          *ngIf="isAdmin"
          nz-icon
          nzType="delete"
          nzTheme="outline"
          (click)="onDelete()"
          [style]="{ marginRight: '10px', cursor: 'pointer' }"
        ></span>
        <span
          *ngIf="isAdmin"
          nz-icon
          nzType="edit"
          nzTheme="outline"
          (click)="onEdit()"
          [style]="{ marginRight: '10px', cursor: 'pointer' }"
        ></span
      ></span>
    </div>
    <div>
      Original Price:
      <span
        style="
          text-decoration: line-through;
          text-decoration-color: red;
          color: red;
        "
        >{{ gameInfo["Original Price"] }}</span
      >
    </div>
    <div>
      Discounted Price:
      <span style="color: green">{{ gameInfo["Discounted Price"] }}</span>
    </div>
    <div>Developer: {{ gameInfo.Developer }}</div>
    <div>Publisher: {{ gameInfo.Publisher }}</div>
    <div>Release Date: {{ gameInfo["Release Date"] }}</div>
    <div>Game Description: {{ gameInfo["Game Description"] }}</div>
  </div>
</div>
<h2 style="margin-top: 20px; border-bottom: 1px solid #eee">Comments</h2>
<nz-list
  [nzDataSource]="commentList"
  [nzRenderItem]="item"
  [nzItemLayout]="'horizontal'"
>
  <ng-template #item let-item>
    <nz-comment [nzAuthor]="item.username" [nzDatetime]="item.update_time">
      <nz-avatar
        nz-comment-avatar
        nzIcon="user"
        [nzSrc]="item.avatar"
      ></nz-avatar>
      <nz-comment-content>
        <p>{{ item.review }}</p>
        <i
          *ngIf="isAdmin"
          nz-icon
          nzType="delete"
          nzTheme="outline"
          (click)="removeComment(item)"
          style="cursor: pointer"
        ></i>
      </nz-comment-content>
    </nz-comment>
  </ng-template>
</nz-list>
<h3 style="margin-top: 20px">add comment</h3>
<nz-comment>
  <nz-avatar nz-comment-avatar nzIcon="user" [nzSrc]=""></nz-avatar>
  <nz-comment-content>
    <nz-form-item>
      <textarea [(ngModel)]="commentValue" nz-input rows="4"></textarea>
    </nz-form-item>
    <nz-form-item>
      <button
        nz-button
        nzType="primary"
        [nzLoading]="submitting"
        [disabled]="!commentValue"
        (click)="handleSubmit()"
      >
        Add Comment
      </button>
    </nz-form-item>
  </nz-comment-content>
</nz-comment>
<nz-modal
  [(nzVisible)]="isVisible"
  nzTitle="Edit Game"
  nzOkText="Ok"
  nzCancelText="Cancel"
  (nzOnOk)="submitForm()"
  (nzOnCancel)="isVisible = false"
>
  <ng-container *nzModalContent>
    <form nz-form [formGroup]="editForm">
      <div nz-row [nzGutter]="24">
        <div nz-col [nzSpan]="24" *ngFor="let field of editField">
          <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="name"
              >{{ field.label }}
            </nz-form-label>
            <nz-form-control
              [nzSm]="14"
              [nzXs]="24"
              [nzErrorTip]="'Please input ' + field.label!"
            >
              <input
                nz-input
                [formControlName]="field.value"
                id="name"
                [placeholder]="field.label"
              />
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
    </form>
  </ng-container>
</nz-modal>
